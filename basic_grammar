input           : space linebreak pipeline space linebreak
pipeline        : full_pipe_seq
                | full_pip_seq AMPERSAND
full_pipe_seq   : pipe_sequence '|' linebreak simpler_command
pipe_sequence   : simple_command
                |  pipe_sequence '|' linebreak simple_command
simple_io_mod   : '>&' space args simple_io_mod
                | '>>&' space args simple_io_mod
iomodifier      : '>' space args iomodifier
                | '<' space args iomodifier
                | '2>' space args iomodifier
                | '>>' space args iomodifier
simple_command  : no_arg_command iomodifier
simpler_command : no_arg_command simple_io_mod
no_arg_command  : args
args            : arg
                | args SPACE arg
                | //empty
arg             : arg word
                : arg quote
                : arg expansion
expansion       : cmd_subst
                | process_subst
cmd_subst       : '$(' space linebreak pipeline space linebreak')'
process_subst   : '<(' space linebreak pipeline space linebreak')'
                | '>(' space linebreak pipeline space linebreak')'
quote           : DQUOTE quote_word DQUOTE
                | SQUOTE quote_word SQUOTE
word            : ch word
                | //mark the start of the word
ch              : CHAR
                | ESCAPE_CHAR
space           : SPACE
                | //empty
linebreak       : newline_list
                |
newline_list    : NEWLINE
                | newline_list NEWLINE
separator_op    : AMPERSAND
                | ';'
separator: separator_op linebreak
         | newline_list
         ;

                

